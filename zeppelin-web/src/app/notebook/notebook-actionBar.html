<!--
Licensed under the Apache License, Version 2.0 (the "License");
you may not use this file except in compliance with the License.
You may obtain a copy of the License at

http://www.apache.org/licenses/LICENSE-2.0

Unless required by applicable law or agreed to in writing, software
distributed under the License is distributed on an "AS IS" BASIS,
WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
See the License for the specific language governing permissions and
limitations under the License.
-->
<div class="noteAction" ng-show="note.id && !paragraphUrl">
  <table class="note-head-layout" cellpadding="0" cellspacing="0">
    <tr>
      <td class="left">
        <div ng-controller="ElasticInputCtrl as input">
          <input type="text" pu-elastic-input class="form-control2" placeholder="{{noteName(note)}}"
                 style="min-width: 0px; max-width: 95%;"
                 ng-if="input.showEditor" ng-model="note.name"
                 ng-blur="sendNewName();input.showEditor = false;"
                 ng-enter="sendNewName();input.showEditor = false;"
                 ng-escape="note.name = oldName; input.showEditor = false" focus-if="input.showEditor"/>
          <p class="form-control-static2"
             ng-show="!input.showEditor">
            <span class="value text-ellipsis"
                  title="{{noteName(note)}}"
                  ng-click="input.showEditor = true; oldName = note.name">{{noteName(note)}}</span>
            <span class="to-edit-events-btn"
                  type="button"
                  ng-click="input.showEditor = true; oldName = note.name"
                  tooltip-placement="bottom" tooltip="修改名称"></span>
          </p>

        </div>
        <div class="events-name">赛事：{{prjName}}</div>
      </td>
      <td class="right">
        <div style="padding-bottom: 10px">
          <span class="labelBtn btn-group">
            <button type="button"
                    class="btn btn-default btn-xs btn-execute-all"
                    ng-class="{'disabled':isNoteRunning()}"
                    ng-click="runNote()"
                    tooltip-placement="bottom" tooltip="执行所有代码"><span class="ico-placeholder"></span></button>
            <button type="button"
                    class="btn btn-default btn-xs"
                    ng-class="{'btn-size-fullscreen':editorToggled,'btn-size-actual':!editorToggled}"
                    ng-click="toggleAllEditor()"
                    ng-hide="viewOnly"
                    tooltip-placement="bottom" tooltip="显示/隐藏代码"><span class="ico-placeholder"></span></button>
            <button type="button"
                    class="btn btn-default btn-xs"
                    ng-class="{'btn-note-output':tableToggled,'btn-note-only':!tableToggled}"
                    ng-click="toggleAllTable()"
                    ng-hide="viewOnly"
                    tooltip-placement="bottom" tooltip="显示/隐藏输出结果"><span class="ico-placeholder"></span></button>
            <button type="button"
                    class="btn btn-default btn-xs btn-clear-output"
                    ng-class="{'disabled':isNoteRunning()}"
                    ng-click="clearAllParagraphOutput()"
                    ng-hide="viewOnly"
                    tooltip-placement="bottom" tooltip="清除输出结果"><span class="ico-placeholder"></span></button>
          </span>
          <span class="btn-group">
            <button type="button"
                    class="btn btn-default btn-xs dropdown-toggle"
                    data-toggle="dropdown">
              {{getLookAndFeel()}} <span class="caret"></span>
            </button>
            <ul class="dropdown-menu pull-right" role="menu">
              <li ng-repeat="looknfeel in looknfeelOption">
                <a class="looknfeel-item" ng-click="setLookAndFeel(looknfeel.k)">{{looknfeel.v}}</a>
              </li>
            </ul>
          </span>

          <span class="setting-btn btn-shortcut-keys"
                type="button"
                data-toggle="modal"
                data-target="#shortcutModal"
                tooltip-placement="bottom" tooltip="快捷键列表"><span class="ico-placeholder"></span></span>
          <span class="setting-btn btn-help"
                type="button"
                ng-click="console.error('fix me!!!')"
                tooltip-placement="bottom" tooltip="帮助"><span class="ico-placeholder"></span></span>
          <span class="setting-btn btn-note-submit"
                type="button"
                ng-click="submitNotebook()"
                tooltip-placement="bottom">提交评测</span>
          <span class="commit-button-holder">
            <span class="setting-btn btn-note-save"
                  type="button"
                  id="versionControlDropdown"
                  ng-hide="viewOnly"
                  data-toggle="dropdown"
                  tooltip-placement="bottom">提交快照</span>
            <ul class="dropdown-menu pull-right"
                aria-labelledby="versionControlDropdown">
              <li>
                <div class="commit-container"
                     ng-class="{'validate-error':!!commitMsgError}">
                    <input type="text"
                           dropdown-input
                           placeholder="commit message"
                           id="note.checkpoint.message"
                           ng-enter="checkpointNotebook()"
                           ng-change="checkpointMsgChanged()"
                           ng-model="note.checkpoint.message"/>
                    <button type="button"
                            class="btn btn-default btn-xs"
                            ng-hide="viewOnly"
                            ng-click="checkpointNotebook($event)"
                            style="margin-left: 4px;"
                            tooltip-placement="bottom" tooltip="将当前版本提交为快照，可在提交历史中查看">提交</button>
                    <div class="error-area"
                         ng-show="commitMsgError">{{commitMsgError}}</div>
                </div>
              </li>
            </ul>
          </span>

        </div>
      </td>
    </tr>
  </table>

</div>
